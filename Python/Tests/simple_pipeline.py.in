#!/usr/bin/env python

import sys
sys.path.insert(0, "@PYTHON_TEST_PYTHON_PATH@")

import os
env_lib_name = "LD_LIBRARY_PATH"
if os.environ.has_key(env_lib_name) :
  os.environ[env_lib_name] = "@PYTHON_TEST_LIB_PATH@:%s" % os.environ[env_lib_name]
else:
  os.environ[env_lib_name] = "@PYTHON_TEST_LIB_PATH@"




import itk, sys

# first argument is the pixel type
PType = getattr(itk, sys.argv[1])
# second arguement the image dimension
dim = int(sys.argv[2])

# get the image type
IType = itk.Image[PType, dim]

# create the reader
reader = itk.ImageFileReader[IType].New(FileName=sys.argv[3])
# and the writer
writer = itk.ImageFileWriter[IType].New(reader, FileName=sys.argv[4])

# execute the filters in the pipeline !
writer.Update()
